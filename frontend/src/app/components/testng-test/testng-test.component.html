<h3>TestNG Results</h3>
<p *ngIf="loaded"
    class="pl-1 font-weight-bold text-dark"
    [ngStyle]="{ background: selectColor(testResults.status) }">
    {{ testResults.status | passfail }}
</p>
<table
    class="table table-striped table-hover table-sm table-responsive"
    [ngClass]="themeService.theme === 'dark' ? ['table-dark'] : ['table-light']"
    *ngIf="loaded">
    <thead>
        <tr>
            <th>Name</th>
            <th>Signature</th>
            <th>Duration</th>
            <th>Started At</th>
            <th>Finished At</th>
            <th>Status</th>
        </tr>
    </thead>
    <tbody>
        <ng-container *ngFor="let method of testResults.tests; let index = index">
            <tr>
                <td>{{ method.name | camelToTitle }}</td>
                <td>{{ method.signature }}</td>
                <td>{{ method.duration_ms }} ms</td>
                <td>{{ method.startTime | dates }}</td>
                <td>{{ method.finishTime | dates }}</td>
                <td
                    [ngStyle]="{ background: selectColor(method.status) }">
                    {{ method.status |passfail }}
                </td>
            </tr>
            <tr>
                <td *ngIf="method.exceptionClass != null" class="table-danger">{{ method.exceptionClass }}</td>
                <td *ngIf="method.exceptionClass != null" colspan="5" class="table-danger">
                    <button class="btn"
                        (click)="toggleStackTrace(index)"
                        [ngClass]="themeService.theme === 'dark' ? ['btn-dark'] : ['btn-light']">
                        {{ btnText }} Stack Trace
                    </button>
                    <span class="font-weight-bold ml-1">Exception Message: {{ method.exceptionMessage }}</span>
                    <div *ngIf="method.showStackTrace">
                        <p [appStacktrace]="method.stackTrace"></p>
                    </div>
                </td>
            </tr>
        </ng-container>
    </tbody>
</table>
<p *ngIf="!loaded">
    Please return to <a [routerLink]="['/home']">home</a> to run a test.
</p>
