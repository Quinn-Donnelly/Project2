# Front End

## Components

* `app.component` is the root component and contains the router-link.  Parent for all components.

* `header.component` contains navigation and the toggle for light and dark theme

* `home.component`  contains the test button that triggers the test.  Upon test completion, page is routed to 'tests' and test results are displayed.  Test is generated by sending request to `/run`

* `testng.component` displays the result of the test in a table.

* `history.component` is a container for all batches done in history.  Parent for `batch.component`.  Grabs batches by hitting `/api/project2/batches/`

* `batch.component` displays historical test data for a given batch.  Grabs individual batch info from `/api/project2/batch/${batchId}/tests`

## Services

* `http.service` utilizes observables to fetch data from the api.
    * `fetchData(url: string): Observable<any>` uses __GET__ to grab data.  Returns an observable to the caller
    * `getData(url: string): Observable<any>` uses __POST__ to grab data.  Returns an observable to the caller
    * `sendTestData(data: any, url: string): Observable<any>` uses __PUT__ to send data

* `uris.service` provides two public methods to construct applicable URIs.
    * `getURIRoute(uri: string): string` returns a URI.  If it detects the default angular route (`localhost:4200`), it will append the pathname and return the route to a local server, otherwise it'll give the relative path on the server it's hosted on (e.g. Amazon's EC2)
    * `getBatchURI(id: string): string` returns the URI required for retrieving the data from a specific batch

* `theme.service` allows each component to be aware of what theme the UI is set to.  Provides a public getter and setter for the theme property that can take the value of `light` or `dark`

* `test.service` is simply a bucket to hold test result information so it can be passed from route to route

* `color.service` provides one public method to convert a test's status to a color
    * `selectColor(value: any): string` returns a color that can be applied to a style.  Red is failed, blue is skipped and green is passed

## Pipes

* `camel-to-title` turns a string from camel case to a titled sentence.
    * Usage: `{{ someString | camelToTitle }}`
    * Exampe: `thisIsSparta` -> `This Is Sparta`

* `dates` uses the _date-fns/format_ function to convert a date object to text
    * Usage `{{ someDate | dates }}`
    * Example `2018-08-17T11:35:18Z` -> `Aug 17 2018, 07:35:18`

* `passFail` takes the numeric passFail values and converts them to `Passed`, `Failed` or `Skipped` according to: 
    * Passed == 1, Failed == 0, Skipped == 2
    * Usage `{{ someStatus | passFail }}
    * Example `0` -> `Failed`

## Directives

* `stackTrace` formats a stack trace by splitting stacktrace text at `'\r\n\tat '` and inserting `'<br>&emsp;at '` in its place.  This creates an indented stack trace as you would see in a console for any Java exception

## Interfaces

* `BatchResult` models a batch, has the following three properties:
    * `batchId: number;`
    * `status: number;`
    * `tests: TestMethod[];`

* `BatchID` models a single object from the result of `api/project2/batches`.  Contains two properties:
    * `batchID: number;`
    * `passFail: number;`

* `TestMethod` models an entire test.  Contains the following properties:
    * `recordID: number;`
    * `batchID: number;`
    * `InitiatedBy: string;`
    * `status: number;`
    * `signature: string;`
    * `name: string;`
    * `duration_ms: number;`
    * `startTime: Date;`
    * `finishTime: Date;`
    * `exceptionClass: string | null;`
    * `exceptionMessage: string | null;`
    * `stackTrace: string | null;`
    * `showStackTrace: boolean | undefined;`
